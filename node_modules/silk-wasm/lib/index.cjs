"use strict";var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty;var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(let key of __getOwnPropNames(from))!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod);var src_exports={};__export(src_exports,{decode:()=>decode,encode:()=>encode,getDuration:()=>getDuration,getWavFileInfo:()=>getWavFileInfo2,isWav:()=>isWav});module.exports=__toCommonJS(src_exports);var import_meta_url=require("url").pathToFileURL(__filename);var Module=(()=>{var _scriptDir=import_meta_url;return async function(moduleArg={}){var f=moduleArg,aa,r;f.ready=new Promise((a,b)=>{aa=a,r=b});var ba=Object.assign({},f),ca=typeof window=="object",t=typeof importScripts=="function",da=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",u="",ea,v,A;if(da){let{createRequire:a}=await import("module");var require2=a(import_meta_url),fs=require2("fs"),fa=require2("path");t?u=fa.dirname(u)+"/":u=require2("url").fileURLToPath(new URL("./",import_meta_url)),ea=(b,c)=>(b=B(b)?new URL(b):fa.normalize(b),fs.readFileSync(b,c?void 0:"utf8")),A=b=>(b=ea(b,!0),b.buffer||(b=new Uint8Array(b)),b),v=(b,c,d,e=!0)=>{b=B(b)?new URL(b):fa.normalize(b),fs.readFile(b,e?void 0:"utf8",(h,l)=>{h?d(h):c(e?l.buffer:l)})},process.argv.slice(2)}else(ca||t)&&(t?u=self.location.href:typeof document<"u"&&document.currentScript&&(u=document.currentScript.src),_scriptDir&&(u=_scriptDir),u.startsWith("blob:")?u="":u=u.substr(0,u.replace(/[?#].*/,"").lastIndexOf("/")+1),ea=a=>{var b=new XMLHttpRequest;return b.open("GET",a,!1),b.send(null),b.responseText},t&&(A=a=>{var b=new XMLHttpRequest;return b.open("GET",a,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),v=(a,b,c)=>{var d=new XMLHttpRequest;d.open("GET",a,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?b(d.response):c()},d.onerror=c,d.send(null)});f.print||console.log.bind(console);var C=f.printErr||console.error.bind(console);Object.assign(f,ba),ba=null;var D;f.wasmBinary&&(D=f.wasmBinary);var F,ha=!1,ia,G,H,I,J,L,ja,ka;function la(){var a=F.buffer;f.HEAP8=ia=new Int8Array(a),f.HEAP16=H=new Int16Array(a),f.HEAPU8=G=new Uint8Array(a),f.HEAPU16=I=new Uint16Array(a),f.HEAP32=J=new Int32Array(a),f.HEAPU32=L=new Uint32Array(a),f.HEAPF32=ja=new Float32Array(a),f.HEAPF64=ka=new Float64Array(a)}var ma=[],na=[],oa=[];function qa(){var a=f.preRun.shift();ma.unshift(a)}var M=0,ra=null,N=null;function sa(a){throw f.onAbort?.(a),a="Aborted("+a+")",C(a),ha=!0,a=new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info."),r(a),a}var ta=a=>a.startsWith("data:application/octet-stream;base64,"),B=a=>a.startsWith("file://"),O;if(f.locateFile){if(O="silk_wasm.wasm",!ta(O)){var ua=O;O=f.locateFile?f.locateFile(ua,u):u+ua}}else O=new URL("silk_wasm.wasm",import_meta_url).href;function va(a){if(a==O&&D)return new Uint8Array(D);if(A)return A(a);throw"both async and sync fetching of the wasm failed"}function wa(a){if(!D&&(ca||t)){if(typeof fetch=="function"&&!B(a))return fetch(a,{credentials:"same-origin"}).then(b=>{if(!b.ok)throw`failed to load wasm binary file at '${a}'`;return b.arrayBuffer()}).catch(()=>va(a));if(v)return new Promise((b,c)=>{v(a,d=>b(new Uint8Array(d)),c)})}return Promise.resolve().then(()=>va(a))}function xa(a,b,c){return wa(a).then(d=>WebAssembly.instantiate(d,b)).then(c,d=>{C(`failed to asynchronously prepare wasm: ${d}`),sa(d)})}function ya(a,b){var c=O;return D||typeof WebAssembly.instantiateStreaming!="function"||ta(c)||B(c)||da||typeof fetch!="function"?xa(c,a,b):fetch(c,{credentials:"same-origin"}).then(d=>WebAssembly.instantiateStreaming(d,a).then(b,function(e){return C(`wasm streaming compile failed: ${e}`),C("falling back to ArrayBuffer instantiation"),xa(c,a,b)}))}var za=a=>{for(;0<a.length;)a.shift()(f)};class Aa{constructor(a){this.C=a-24}}var Ba=0,Ca=0,Da,P=a=>{for(var b="";G[a];)b+=Da[G[a++]];return b},Q={},R={},S={},T,Ea=a=>{throw new T(a)},Fa,Ga=(a,b)=>{function c(g){if(g=b(g),g.length!==d.length)throw new Fa("Mismatched type converter count");for(var m=0;m<d.length;++m)U(d[m],g[m])}var d=[];d.forEach(function(g){S[g]=a});var e=Array(a.length),h=[],l=0;a.forEach((g,m)=>{R.hasOwnProperty(g)?e[m]=R[g]:(h.push(g),Q.hasOwnProperty(g)||(Q[g]=[]),Q[g].push(()=>{e[m]=R[g],++l,l===h.length&&c(e)}))}),h.length===0&&c(e)};function Ha(a,b,c={}){var d=b.name;if(!a)throw new T(`type "${d}" must have a positive integer typeid pointer`);if(R.hasOwnProperty(a)){if(c.F)return;throw new T(`Cannot register type '${d}' twice`)}R[a]=b,delete S[a],Q.hasOwnProperty(a)&&(b=Q[a],delete Q[a],b.forEach(e=>e()))}function U(a,b,c={}){if(!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Ha(a,b,c)}var Ia=[],V=[],Ja=a=>{9<a&&--V[a+1]===0&&(V[a]=void 0,Ia.push(a))},Ka=a=>{if(!a)throw new T("Cannot use deleted val. handle = "+a);return V[a]},La=a=>{switch(a){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let b=Ia.pop()||V.length;return V[b]=a,V[b+1]=1,b}};function Ma(a){return this.fromWireType(L[a>>2])}var Na={name:"emscripten::val",fromWireType:a=>{var b=Ka(a);return Ja(a),b},toWireType:(a,b)=>La(b),argPackAdvance:8,readValueFromPointer:Ma,B:null},Oa=(a,b)=>{switch(b){case 4:return function(c){return this.fromWireType(ja[c>>2])};case 8:return function(c){return this.fromWireType(ka[c>>3])};default:throw new TypeError(`invalid float width (${b}): ${a}`)}},W=(a,b)=>Object.defineProperty(b,"name",{value:a}),Pa=a=>{for(;a.length;){var b=a.pop();a.pop()(b)}};function Qa(a){for(var b=1;b<a.length;++b)if(a[b]!==null&&a[b].B===void 0)return!0;return!1}function Ra(a){var b=Function;if(!(b instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof b} which is not a function`);var c=W(b.name||"unknownFunctionName",function(){});return c.prototype=b.prototype,c=new c,a=b.apply(c,a),a instanceof Object?a:c}for(var Sa=(a,b)=>{if(f[a].A===void 0){var c=f[a];f[a]=function(...d){if(!f[a].A.hasOwnProperty(d.length))throw new T(`Function '${b}' called with an invalid number of arguments (${d.length}) - expects one of (${f[a].A})!`);return f[a].A[d.length].apply(this,d)},f[a].A=[],f[a].A[c.D]=c}},Ta=(a,b,c)=>{if(f.hasOwnProperty(a)){if(c===void 0||f[a].A!==void 0&&f[a].A[c]!==void 0)throw new T(`Cannot register public name '${a}' twice`);if(Sa(a,a),f.hasOwnProperty(c))throw new T(`Cannot register multiple overloads of a function with the same number of arguments (${c})!`);f[a].A[c]=b}else f[a]=b,c!==void 0&&(f[a].H=c)},Ua=(a,b)=>{for(var c=[],d=0;d<a;d++)c.push(L[b+4*d>>2]);return c},X=[],Xa,Ya=a=>{var b=X[a];return b||(a>=X.length&&(X.length=a+1),X[a]=b=Xa.get(a)),b},Za=(a,b,c=[])=>a.includes("j")?(0,f["dynCall_"+a])(b,...c):Ya(b)(...c),$a=(a,b)=>(...c)=>Za(a,b,c),ab=(a,b)=>{a=P(a);var c=a.includes("j")?$a(a,b):Ya(b);if(typeof c!="function")throw new T(`unknown function pointer with signature ${a}: ${b}`);return c},bb,db=a=>{a=cb(a);var b=P(a);return Y(a),b},eb=(a,b)=>{function c(h){e[h]||R[h]||(S[h]?S[h].forEach(c):(d.push(h),e[h]=!0))}var d=[],e={};throw b.forEach(c),new bb(`${a}: `+d.map(db).join([", "]))},fb=a=>{a=a.trim();let b=a.indexOf("(");return b!==-1?a.substr(0,b):a},gb=(a,b,c)=>{switch(b){case 1:return c?d=>ia[d]:d=>G[d];case 2:return c?d=>H[d>>1]:d=>I[d>>1];case 4:return c?d=>J[d>>2]:d=>L[d>>2];default:throw new TypeError(`invalid integer width (${b}): ${a}`)}},hb=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ib=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,jb=(a,b)=>{for(var c=a>>1,d=c+b/2;!(c>=d)&&I[c];)++c;if(c<<=1,32<c-a&&ib)return ib.decode(G.subarray(a,c));for(c="",d=0;!(d>=b/2);++d){var e=H[a+2*d>>1];if(e==0)break;c+=String.fromCharCode(e)}return c},kb=(a,b,c)=>{if(c??=2147483647,2>c)return 0;c-=2;var d=b;c=c<2*a.length?c/2:a.length;for(var e=0;e<c;++e)H[b>>1]=a.charCodeAt(e),b+=2;return H[b>>1]=0,b-d},lb=a=>2*a.length,mb=(a,b)=>{for(var c=0,d="";!(c>=b/4);){var e=J[a+4*c>>2];if(e==0)break;++c,65536<=e?(e-=65536,d+=String.fromCharCode(55296|e>>10,56320|e&1023)):d+=String.fromCharCode(e)}return d},nb=(a,b,c)=>{if(c??=2147483647,4>c)return 0;var d=b;c=d+c-4;for(var e=0;e<a.length;++e){var h=a.charCodeAt(e);if(55296<=h&&57343>=h){var l=a.charCodeAt(++e);h=65536+((h&1023)<<10)|l&1023}if(J[b>>2]=h,b+=4,b+4>c)break}return J[b>>2]=0,b-d},ob=a=>{for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&++c,b+=4}return b},pb=[],qb=a=>{var b=pb.length;return pb.push(a),b},rb=(a,b)=>{var c=R[a];if(c===void 0)throw a=`${b} has unknown type ${db(a)}`,new T(a);return c},sb=(a,b)=>{for(var c=Array(a),d=0;d<a;++d)c[d]=rb(L[b+4*d>>2],"parameter "+d);return c},tb=(a,b,c)=>{var d=[];return a=a.toWireType(d,c),d.length&&(L[b>>2]=La(d)),a},ub=Array(256),vb=0;256>vb;++vb)ub[vb]=String.fromCharCode(vb);Da=ub,T=f.BindingError=class extends Error{constructor(a){super(a),this.name="BindingError"}},Fa=f.InternalError=class extends Error{constructor(a){super(a),this.name="InternalError"}},V.push(0,1,void 0,1,null,1,!0,1,!1,1),f.count_emval_handles=()=>V.length/2-5-Ia.length,bb=f.UnboundTypeError=((a,b)=>{var c=W(b,function(d){this.name=b,this.message=d,d=Error(d).stack,d!==void 0&&(this.stack=this.toString()+`
`+d.replace(/^Error(:[^\n]*)?\n/,""))});return c.prototype=Object.create(a.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},c})(Error,"UnboundTypeError");var xb={k:(a,b,c)=>{var d=new Aa(a);throw L[d.C+16>>2]=0,L[d.C+4>>2]=b,L[d.C+8>>2]=c,Ba=a,Ca++,Ba},o:()=>{},i:(a,b,c,d)=>{b=P(b),U(a,{name:b,fromWireType:function(e){return!!e},toWireType:function(e,h){return h?c:d},argPackAdvance:8,readValueFromPointer:function(e){return this.fromWireType(G[e])},B:null})},s:a=>U(a,Na),h:(a,b,c)=>{b=P(b),U(a,{name:b,fromWireType:d=>d,toWireType:(d,e)=>e,argPackAdvance:8,readValueFromPointer:Oa(b,c),B:null})},d:(a,b,c,d,e,h,l)=>{var g=Ua(b,c);a=P(a),a=fb(a),e=ab(d,e),Ta(a,function(){eb(`Cannot call ${a} due to unbound types`,g)},b-1),Ga(g,m=>{var k=[m[0],null].concat(m.slice(1));m=a;var n=a,q=e,p=k.length;if(2>p)throw new T("argTypes array size mismatch! Must at least get return value and 'this' types!");var x=k[1]!==null&&!1,E=Qa(k),y=k[0].name!=="void";q=[n,Ea,q,h,Pa,k[0],k[1]];for(var w=0;w<p-2;++w)q.push(k[w+2]);if(!E)for(w=x?1:2;w<k.length;++w)k[w].B!==null&&q.push(k[w].B);E=Qa(k),w=k.length;var z="",K="";for(p=0;p<w-2;++p)z+=(p!==0?", ":"")+"arg"+p,K+=(p!==0?", ":"")+"arg"+p+"Wired";z=`
        return function (${z}) {
        if (arguments.length !== ${w-2}) {
          throwBindingError('function ' + humanName + ' called with ' + arguments.length + ' arguments, expected ${w-2}');
        }`,E&&(z+=`var destructors = [];
`);var Va=E?"destructors":"null",pa="humanName throwBindingError invoker fn runDestructors retType classParam".split(" ");for(x&&(z+="var thisWired = classParam['toWireType']("+Va+`, this);
`),p=0;p<w-2;++p)z+="var arg"+p+"Wired = argType"+p+"['toWireType']("+Va+", arg"+p+`);
`,pa.push("argType"+p);if(x&&(K="thisWired"+(0<K.length?", ":"")+K),z+=(y||l?"var rv = ":"")+"invoker(fn"+(0<K.length?", ":"")+K+`);
`,E)z+=`runDestructors(destructors);
`;else for(p=x?1:2;p<k.length;++p)x=p===1?"thisWired":"arg"+(p-2)+"Wired",k[p].B!==null&&(z+=`${x}_dtor(${x});
`,pa.push(`${x}_dtor`));y&&(z+=`var ret = retType['fromWireType'](rv);
return ret;
`);let[Wa,zb]=[pa,z+`}
`];if(Wa.push(zb),k=Ra(Wa)(...q),n=W(n,k),k=b-1,!f.hasOwnProperty(m))throw new Fa("Replacing nonexistent public symbol");return f[m].A!==void 0&&k!==void 0?f[m].A[k]=n:(f[m]=n,f[m].D=k),[]})},b:(a,b,c,d,e)=>{if(b=P(b),e===-1&&(e=4294967295),e=g=>g,d===0){var h=32-8*c;e=g=>g<<h>>>h}var l=b.includes("unsigned")?function(g,m){return m>>>0}:function(g,m){return m};U(a,{name:b,fromWireType:e,toWireType:l,argPackAdvance:8,readValueFromPointer:gb(b,c,d!==0),B:null})},a:(a,b,c)=>{function d(h){return new e(ia.buffer,L[h+4>>2],L[h>>2])}var e=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];c=P(c),U(a,{name:c,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{F:!0})},g:(a,b)=>{b=P(b);var c=b==="std::string";U(a,{name:b,fromWireType:function(d){var e=L[d>>2],h=d+4;if(c)for(var l=h,g=0;g<=e;++g){var m=h+g;if(g==e||G[m]==0){if(l){var k=l,n=G,q=k+(m-l);for(l=k;n[l]&&!(l>=q);)++l;if(16<l-k&&n.buffer&&hb)k=hb.decode(n.subarray(k,l));else{for(q="";k<l;){var p=n[k++];if(p&128){var x=n[k++]&63;if((p&224)==192)q+=String.fromCharCode((p&31)<<6|x);else{var E=n[k++]&63;p=(p&240)==224?(p&15)<<12|x<<6|E:(p&7)<<18|x<<12|E<<6|n[k++]&63,65536>p?q+=String.fromCharCode(p):(p-=65536,q+=String.fromCharCode(55296|p>>10,56320|p&1023))}}else q+=String.fromCharCode(p)}k=q}}else k="";if(y===void 0)var y=k;else y+="\0",y+=k;l=m+1}}else{for(y=Array(e),g=0;g<e;++g)y[g]=String.fromCharCode(G[h+g]);y=y.join("")}return Y(d),y},toWireType:function(d,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var h,l=typeof e=="string";if(!(l||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array))throw new T("Cannot pass non-string to std::string");var g;if(c&&l)for(h=g=0;h<e.length;++h){var m=e.charCodeAt(h);127>=m?g++:2047>=m?g+=2:55296<=m&&57343>=m?(g+=4,++h):g+=3}else g=e.length;if(h=g,g=wb(4+h+1),m=g+4,L[g>>2]=h,c&&l){if(l=m,m=h+1,h=G,0<m){m=l+m-1;for(var k=0;k<e.length;++k){var n=e.charCodeAt(k);if(55296<=n&&57343>=n){var q=e.charCodeAt(++k);n=65536+((n&1023)<<10)|q&1023}if(127>=n){if(l>=m)break;h[l++]=n}else{if(2047>=n){if(l+1>=m)break;h[l++]=192|n>>6}else{if(65535>=n){if(l+2>=m)break;h[l++]=224|n>>12}else{if(l+3>=m)break;h[l++]=240|n>>18,h[l++]=128|n>>12&63}h[l++]=128|n>>6&63}h[l++]=128|n&63}}h[l]=0}}else if(l)for(l=0;l<h;++l){if(k=e.charCodeAt(l),255<k)throw Y(m),new T("String has UTF-16 code units that do not fit in 8 bits");G[m+l]=k}else for(l=0;l<h;++l)G[m+l]=e[l];return d!==null&&d.push(Y,g),g},argPackAdvance:8,readValueFromPointer:Ma,B(d){Y(d)}})},e:(a,b,c)=>{if(c=P(c),b===2)var d=jb,e=kb,h=lb,l=g=>I[g>>1];else b===4&&(d=mb,e=nb,h=ob,l=g=>L[g>>2]);U(a,{name:c,fromWireType:g=>{for(var m=L[g>>2],k,n=g+4,q=0;q<=m;++q){var p=g+4+q*b;(q==m||l(p)==0)&&(n=d(n,p-n),k===void 0?k=n:(k+="\0",k+=n),n=p+b)}return Y(g),k},toWireType:(g,m)=>{if(typeof m!="string")throw new T(`Cannot pass non-string to C++ string type ${c}`);var k=h(m),n=wb(4+k+b);return L[n>>2]=k/b,e(m,n+4,k+b),g!==null&&g.push(Y,n),n},argPackAdvance:8,readValueFromPointer:Ma,B(g){Y(g)}})},j:(a,b)=>{b=P(b),U(a,{G:!0,name:b,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},m:(a,b,c,d)=>(a=pb[a],b=Ka(b),a(null,b,c,d)),c:Ja,n:(a,b,c)=>{b=sb(a,b);var d=b.shift();a--;var e=`return function (obj, func, destructorsRef, args) {
`,h=0,l=[];c===0&&l.push("obj");for(var g=["retType"],m=[d],k=0;k<a;++k)l.push("arg"+k),g.push("argType"+k),m.push(b[k]),e+=`  var arg${k} = argType${k}.readValueFromPointer(args${h?"+"+h:""});
`,h+=b[k].argPackAdvance;return e+=`  var rv = ${c===1?"new func":"func.call"}(${l.join(", ")});
`,d.G||(g.push("emval_returnValue"),m.push(tb),e+=`  return emval_returnValue(retType, destructorsRef, rv);
`),g.push(e+`};
`),a=Ra(g)(...m),c=`methodCaller<(${b.map(n=>n.name).join(", ")}) => ${d.name}>`,qb(W(c,a))},f:a=>{9<a&&(V[a+1]+=1)},l:a=>{var b=Ka(a);Pa(b),Ja(a)},t:(a,b)=>(a=rb(a,"_emval_take_value"),a=a.readValueFromPointer(b),La(a)),p:()=>{sa("")},r:(a,b,c)=>G.copyWithin(a,b,b+c),q:a=>{var b=G.length;if(a>>>=0,2147483648<a)return!1;for(var c=1;4>=c;c*=2){var d=b*(1+.2/c);d=Math.min(d,a+100663296);var e=Math;d=Math.max(a,d);a:{e=(e.min.call(e,2147483648,d+(65536-d%65536)%65536)-F.buffer.byteLength+65535)/65536;try{F.grow(e),la();var h=1;break a}catch{}h=void 0}if(h)return!0}return!1}},Z=function(){function a(c){return Z=c.exports,F=Z.u,la(),Xa=Z.w,na.unshift(Z.v),M--,f.monitorRunDependencies?.(M),M==0&&(ra!==null&&(clearInterval(ra),ra=null),N&&(c=N,N=null,c())),Z}var b={a:xb};if(M++,f.monitorRunDependencies?.(M),f.instantiateWasm)try{return f.instantiateWasm(b,a)}catch(c){C(`Module.instantiateWasm callback failed with error: ${c}`),r(c)}return ya(b,function(c){a(c.instance)}).catch(r),{}}(),wb=a=>(wb=Z.x)(a),Y=a=>(Y=Z.y)(a),cb=a=>(cb=Z.z)(a),yb;N=function Ab(){yb||Bb(),yb||(N=Ab)};function Bb(){function a(){if(!yb&&(yb=!0,f.calledRun=!0,!ha)){if(za(na),aa(f),f.onRuntimeInitialized&&f.onRuntimeInitialized(),f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;){var b=f.postRun.shift();oa.unshift(b)}za(oa)}}if(!(0<M)){if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)qa();za(ma),0<M||(f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),a()},1)):a())}}if(f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);0<f.preInit.length;)f.preInit.pop()();return Bb(),moduleArg.ready}})(),silk_wasm_default=Module;function isWavFile(fileData){try{let chunks=unpackWavFileChunks(fileData),fmt=decodeFormatChunk(chunks.get("fmt")),data=chunks.get("data");return getWavFileType(fmt),verifyDataChunkLength(data,fmt),!0}catch{return!1}}var audioEncodingNames=["int","float"],wavFileTypeAudioEncodings=[0,0,0,1];function decodeWavFile(fileData){let chunks=unpackWavFileChunks(fileData),fmt=decodeFormatChunk(chunks.get("fmt")),data=chunks.get("data"),wavFileType=getWavFileType(fmt),audioEncoding=wavFileTypeAudioEncodings[wavFileType],wavFileTypeName=audioEncodingNames[audioEncoding]+fmt.bitsPerSample;return verifyDataChunkLength(data,fmt),{channelData:decodeDataChunk(data,fmt,wavFileType),sampleRate:fmt.sampleRate,numberOfChannels:fmt.numberOfChannels,audioEncoding,bitsPerSample:fmt.bitsPerSample,wavFileTypeName}}function unpackWavFileChunks(fileData){let dataView;fileData instanceof ArrayBuffer?dataView=new DataView(fileData):dataView=new DataView(fileData.buffer,fileData.byteOffset,fileData.byteLength);let fileLength=dataView.byteLength;if(fileLength<20)throw new Error("WAV file is too short.");if(getString(dataView,0,4)!="RIFF")throw new Error("Not a valid WAV file (no RIFF header).");let mainChunkLength=dataView.getUint32(4,!0);if(8+mainChunkLength!=fileLength)throw new Error(`Main chunk length of WAV file (${8+mainChunkLength}) does not match file size (${fileLength}).`);if(getString(dataView,8,4)!="WAVE")throw new Error("RIFF file is not a WAV file.");let chunks=new Map,fileOffset=12;for(;fileOffset<fileLength;){if(fileOffset+8>fileLength)throw new Error(`Incomplete chunk prefix in WAV file at offset ${fileOffset}.`);let chunkId=getString(dataView,fileOffset,4).trim(),chunkLength=dataView.getUint32(fileOffset+4,!0);if(fileOffset+8+chunkLength>fileLength)throw new Error(`Incomplete chunk data in WAV file at offset ${fileOffset}.`);let chunkData=new DataView(dataView.buffer,dataView.byteOffset+fileOffset+8,chunkLength);chunks.set(chunkId,chunkData);let padLength=chunkLength%2;fileOffset+=8+chunkLength+padLength}return chunks}function getString(dataView,offset,length){let a=new Uint8Array(dataView.buffer,dataView.byteOffset+offset,length);return String.fromCharCode.apply(null,a)}function getInt24(dataView,offset){let b0=dataView.getInt8(offset+2)*65536,b12=dataView.getUint16(offset,!0);return b0+b12}function decodeFormatChunk(dataView){if(!dataView)throw new Error("No format chunk found in WAV file.");if(dataView.byteLength<16)throw new Error("Format chunk of WAV file is too short.");let fmt={};return fmt.formatCode=dataView.getUint16(0,!0),fmt.numberOfChannels=dataView.getUint16(2,!0),fmt.sampleRate=dataView.getUint32(4,!0),fmt.bytesPerSec=dataView.getUint32(8,!0),fmt.bytesPerFrame=dataView.getUint16(12,!0),fmt.bitsPerSample=dataView.getUint16(14,!0),fmt}function getWavFileType(fmt){if(fmt.numberOfChannels<1||fmt.numberOfChannels>999)throw new Error("Invalid number of channels in WAV file.");let bytesPerSample=Math.ceil(fmt.bitsPerSample/8),expectedBytesPerFrame=fmt.numberOfChannels*bytesPerSample;if(fmt.formatCode==1&&fmt.bitsPerSample>=1&&fmt.bitsPerSample<=8&&fmt.bytesPerFrame==expectedBytesPerFrame)return 0;if(fmt.formatCode==1&&fmt.bitsPerSample>=9&&fmt.bitsPerSample<=16&&fmt.bytesPerFrame==expectedBytesPerFrame)return 1;if(fmt.formatCode==1&&fmt.bitsPerSample>=17&&fmt.bitsPerSample<=24&&fmt.bytesPerFrame==expectedBytesPerFrame)return 2;if(fmt.formatCode==3&&fmt.bitsPerSample==32&&fmt.bytesPerFrame==expectedBytesPerFrame)return 3;throw new Error(`Unsupported WAV file type, formatCode=${fmt.formatCode}, bitsPerSample=${fmt.bitsPerSample}, bytesPerFrame=${fmt.bytesPerFrame}, numberOfChannels=${fmt.numberOfChannels}.`)}function decodeDataChunk(data,fmt,wavFileType){switch(wavFileType){case 0:return decodeDataChunk_uint8(data,fmt);case 1:return decodeDataChunk_int16(data,fmt);case 2:return decodeDataChunk_int24(data,fmt);case 3:return decodeDataChunk_float32(data,fmt);default:throw new Error("No decoder.")}}function decodeDataChunk_int16(data,fmt){let channelData=allocateChannelDataArrays(data.byteLength,fmt),numberOfChannels=fmt.numberOfChannels,numberOfFrames=channelData[0].length,offs=0;for(let frameNo=0;frameNo<numberOfFrames;frameNo++)for(let channelNo=0;channelNo<numberOfChannels;channelNo++){let sampleValueFloat=data.getInt16(offs,!0)/32768;channelData[channelNo][frameNo]=sampleValueFloat,offs+=2}return channelData}function decodeDataChunk_uint8(data,fmt){let channelData=allocateChannelDataArrays(data.byteLength,fmt),numberOfChannels=fmt.numberOfChannels,numberOfFrames=channelData[0].length,offs=0;for(let frameNo=0;frameNo<numberOfFrames;frameNo++)for(let channelNo=0;channelNo<numberOfChannels;channelNo++){let sampleValueFloat=(data.getUint8(offs)-128)/128;channelData[channelNo][frameNo]=sampleValueFloat,offs+=1}return channelData}function decodeDataChunk_int24(data,fmt){let channelData=allocateChannelDataArrays(data.byteLength,fmt),numberOfChannels=fmt.numberOfChannels,numberOfFrames=channelData[0].length,offs=0;for(let frameNo=0;frameNo<numberOfFrames;frameNo++)for(let channelNo=0;channelNo<numberOfChannels;channelNo++){let sampleValueFloat=getInt24(data,offs)/8388608;channelData[channelNo][frameNo]=sampleValueFloat,offs+=3}return channelData}function decodeDataChunk_float32(data,fmt){let channelData=allocateChannelDataArrays(data.byteLength,fmt),numberOfChannels=fmt.numberOfChannels,numberOfFrames=channelData[0].length,offs=0;for(let frameNo=0;frameNo<numberOfFrames;frameNo++)for(let channelNo=0;channelNo<numberOfChannels;channelNo++){let sampleValueFloat=data.getFloat32(offs,!0);channelData[channelNo][frameNo]=sampleValueFloat,offs+=4}return channelData}function allocateChannelDataArrays(dataLength,fmt){let numberOfFrames=Math.floor(dataLength/fmt.bytesPerFrame),channelData=new Array(fmt.numberOfChannels);for(let channelNo=0;channelNo<fmt.numberOfChannels;channelNo++)channelData[channelNo]=new Float32Array(numberOfFrames);return channelData}function verifyDataChunkLength(data,fmt){if(!data)throw new Error("No data chunk found in WAV file.");if(data.byteLength%fmt.bytesPerFrame!=0)throw new Error("WAV file data chunk length is not a multiple of frame size.")}function getWavFileInfo(fileData){let chunks=unpackWavFileChunks(fileData),chunkInfo=getChunkInfo(chunks),fmt=decodeFormatChunk(chunks.get("fmt"));return{chunkInfo,fmt}}function getChunkInfo(chunks){let chunkInfo=[];for(let e of chunks){let ci={};ci.chunkId=e[0],ci.dataOffset=e[1].byteOffset,ci.dataLength=e[1].byteLength,chunkInfo.push(ci)}return chunkInfo.sort((e1,e2)=>e1.dataOffset-e2.dataOffset),chunkInfo}function concat(list,length){if(list.length===0)return new Uint8Array;if(length===void 0){length=0;for(let i=0;i<list.length;i++)list[i].length&&(length+=list[i].length)}let buffer=new Uint8Array(length),pos=0;for(let i=0;i<list.length;i++){let buf=list[i];pos+=_copyActual(buf,buffer,pos,0,buf.length)}return pos<length&&buffer.fill(0,pos,length),buffer}function _copyActual(source,target,targetStart,sourceStart,sourceEnd){sourceEnd-sourceStart>target.length-targetStart&&(sourceEnd=sourceStart+target.length-targetStart);let nb=sourceEnd-sourceStart,sourceLen=source.length-sourceStart;return nb>sourceLen&&(nb=sourceLen),(sourceStart!==0||sourceEnd<source.length)&&(source=new Uint8Array(source.buffer,source.byteOffset+sourceStart,nb)),target.set(source,targetStart),nb}function ensureMonoPcm(channelData){let{length:numberOfChannels}=channelData;if(numberOfChannels===1)return channelData[0];let monoData=new Float32Array(channelData[0].length);for(let i=0;i<monoData.length;i++){let sum=0;for(let j=0;j<numberOfChannels;j++)sum+=channelData[j][i];monoData[i]=sum/numberOfChannels}return monoData}function ensureS16lePcm(input){let numberOfFrames=input.length,bytesPerSample=Math.ceil(16/8),fileLength=numberOfFrames*bytesPerSample,arrayBuffer=new ArrayBuffer(fileLength),int16Array=new Int16Array(arrayBuffer);for(let offset=0;offset<numberOfFrames;offset++){let sampleValueFloat=input[offset],sampleValueInt16=floatToSignedInt16(sampleValueFloat);int16Array[offset]=sampleValueInt16}return arrayBuffer}function floatToSignedInt16(v){return v*=32768,v=~~v,v>32767?32767:v}async function encode(input,sampleRate){let instance=await silk_wasm_default(),buffer=ArrayBuffer.isView(input)?input.buffer:input;if(isWavFile(input)){let{channelData,sampleRate:wavSampleRate}=decodeWavFile(input);sampleRate||=wavSampleRate,buffer=ensureS16lePcm(ensureMonoPcm(channelData))}let arr=[],outputLength=0,ret=instance.silk_encode(buffer,buffer.byteLength,sampleRate,chunk=>{outputLength+=chunk.length,arr.push(chunk.slice())});if(ret===0)throw new Error("silk encoding failure");let last=arr.pop();return last&&(arr.push(last.slice(0,-1)),outputLength--),{data:concat(arr,outputLength),duration:ret}}async function decode(input,sampleRate){let instance=await silk_wasm_default(),buffer=ArrayBuffer.isView(input)?input.buffer:input,arr=[],outputLength=0,ret=instance.silk_decode(buffer,buffer.byteLength,sampleRate,chunk=>{outputLength+=chunk.length,arr.push(chunk.slice())});if(ret===0)throw new Error("silk decoding failure");return{data:concat(arr,outputLength),duration:ret}}function getDuration(silk,frameMs=20){let buffer=ArrayBuffer.isView(silk)?silk.buffer:silk,offset=silk[0]===2?10:9,blocks=0,view=new DataView(buffer);for(;offset<view.byteLength;){let size=view.getUint16(offset,!0);blocks+=1,offset+=size+2}return blocks*frameMs}function isWav(fileData){return isWavFile(fileData)}function getWavFileInfo2(fileData){return getWavFileInfo(fileData)}0&&(module.exports={decode,encode,getDuration,getWavFileInfo,isWav});
